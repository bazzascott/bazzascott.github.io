<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="page.css">
    <title>Iglooghost Translator</title>
    <script>
        var chartotal = 0;
        var string = "";
        function clearChk() {
            document.querySelectorAll('input[type=checkbox]').forEach(cb => cb.checked = false);
            chartotal = 0;
            char = 0;
        };
        function checkbox(cb) {
            var val = cb.checked ? cb.value : 0 - cb.value;
            chartotal = parseInt(chartotal) + parseInt(val);
        };
        function submit() {
            var char = chartotal > 32 && chartotal < 59 ? String.fromCharCode(chartotal + 32) : "";
            string = string + char;
            updateTxt();
        };
        function space() {
            string = string + " ";
            updateTxt();
        };
        function bkspc() {
            string = string.slice(0,-1);
            updateTxt();
        };
        function clearString() {
            string = "";
            updateTxt();
            resetCanvas();
        };
        function updateTxt() {
            document.getElementById('translation').textContent = string;
            document.getElementById('glyphs').textContent = string;
            clearChk();
        };

        function exportGlyph() {
            var textBox = document.getElementById('engTxt');
            var textStr = textBox.value;
            textStr = textStr.replace(/[^a-zA-z ]/g, "");
            if (textStr.length > 0) {
                var canv = document.getElementById("exportCanvas");
                var ctx = canv.getContext('2d');
                ctx.font = '45px exoalpha';
                canv.width = ctx.measureText(textStr).width + 20;
                canv.height = ctx.measureText("m").width + 20;
                ctx.font = '45px exoalpha';
                ctx.fillStyle = "white";
                ctx.fillRect(0, 0, canv.width, canv.height);
                ctx.fillStyle = "black";
                ctx.fillText(textStr, 10, 25);
                textBox.value = "";
                string = textStr.toUpperCase();
                updateTxt();
            } else {
                alert("No valid text to convert.")
            }
        }

        function resetCanvas() {
            var canv = document.getElementById("exportCanvas");
            canv.width = 0;
            canv.height = 0;
        }
    </script>
</head>
<body onload="updateTxt()">

<h1>Iglooghost Translator</h1>
<p>Tool to assist in translating new Iglooghost glyphs on <a href="https://exoportal.xyz">Exoportal.xyz</a>.</p>

<hr>
<h3>Glyphs > English</h3>
<div class="translationTitle">
    <p>Glyphs:</p>
    <div class="translation"><div class="textConvExo" id="glyphs"></div><span class="cursor">_</span></div>
</div>
<div class="translationTitle">
    <p>Translated:</p>
    <div class="translation"><div class ="textConv" id="translation"></div><span class="cursor">_</span></div>
</div>

<div class="charInput">
    <table>
        <tr>
            <td><input type="checkbox" value="32" onclick="checkbox(this)"></td>
            <td><input type="checkbox" value="8" onclick="checkbox(this)"></td>
            <td><input type="checkbox" value="4" onclick="checkbox(this)"></td>
            <td>&nbsp;</td>
            <td><input type="button" value="Bkspc" onclick="bkspc()"></td>
        </tr>
        <tr>
            <td><input type="checkbox" value="16" onclick="checkbox(this)"></td>
            <td><input type="checkbox" value="2" onclick="checkbox(this)"></td>
            <td><input type="checkbox" value="1" onclick="checkbox(this)"></td>
            <td><input type="button" value="Submit" onclick="submit()"></td>
            <td><input type="button" value="Space" onclick="space()"></td>
            <td><input type="button" value="Clear" onclick="clearString()"></td>
        </tr>
    </table>
</div>
<br>
<hr>
<h3>English > Glyphs</h3>
<div class="engToGlyph"><input type="text" id="engTxt"></div>
<div class="export"><input type="button" value="Export Glyphs" onclick="exportGlyph()"></div>
<div class="exportCan"><canvas id="exportCanvas" width="0px" height="0px"></canvas></div>
<hr>
<div class="about">
    <h1>About</h1>
    <p>As far as I currently understand the alphabet it looks to be 6 bit binary values from 33 for A through to 59 for Z. 
        <br>
        The 2x3 grid is arranged as,
        <br>
        <br>
        | 32 | 8 | 4 |
        <br>
        <br>
        | 16 | 2 | 1 |
    </p>
</div>

<div class="alphabet">
    <p>Cheat Sheet:</p>
    <table>
        <tr>
            <td>A</td>
            <td>B</td>
            <td>C</td>
            <td>D</td>
            <td>E</td>
            <td>F</td>
            <td>G</td>
            <td>H</td>
            <td>I</td>
            <td>J</td>
            <td>K</td>
            <td>L</td>
            <td>M</td>
        </tr>
        <tr>
            <td>A</td>
            <td>B</td>
            <td>C</td>
            <td>D</td>
            <td>E</td>
            <td>F</td>
            <td>G</td>
            <td>H</td>
            <td>I</td>
            <td>J</td>
            <td>K</td>
            <td>L</td>
            <td>M</td>
        </tr>
        <tr>
            <td>N</td>
            <td>O</td>
            <td>P</td>
            <td>Q</td>
            <td>R</td>
            <td>S</td>
            <td>T</td>
            <td>U</td>
            <td>V</td>
            <td>W</td>
            <td>X</td>
            <td>Y</td>
            <td>Z</td>
        </tr>
        <tr>
            <td>N</td>
            <td>O</td>
            <td>P</td>
            <td>Q</td>
            <td>R</td>
            <td>S</td>
            <td>T</td>
            <td>U</td>
            <td>V</td>
            <td>W</td>
            <td>X</td>
            <td>Y</td>
            <td>Z</td>
        </tr>
    </table>
</div>

</body>
</html> 
